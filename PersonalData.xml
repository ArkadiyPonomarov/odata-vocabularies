<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Alias="Core" Namespace="Org.OData.Core.V1" />
  </edmx:Reference>
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml">
    <edmx:Include Alias="Validation" Namespace="Org.OData.Validation.V1" />
  </edmx:Reference>

  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="com.sap.vocabularies.PersonalData.v1" Alias="PersonalData">
      <Annotation Term="Common.Experimental" />
      <Annotation Term="Core.Description">
        <String>Terms for annotating Personal Data</String>
      </Annotation>
      <Annotation Term="Core.Description" Qualifier="Published">
        <String>2018-01-24 Â© Copyright 2018 SAP SE. All rights reserved</String>
      </Annotation>
      <Annotation Term="Core.Links">
        <Collection>
          <Record>
            <PropertyValue Property="rel" String="latest-version" />
            <!-- TODO: replace with SCN link once published -->
            <PropertyValue Property="href" String="https://github.wdf.sap.corp/pages/odata/vocabularies/PersonalData.xml" />
          </Record>
          <Record>
            <PropertyValue Property="rel" String="describedby" />
            <!-- TODO: replace with SCN link once published -->
            <PropertyValue Property="href" String="https://github.wdf.sap.corp/odata/vocabularies/blob/master/PersonalData.md" />
          </Record>
        </Collection>
      </Annotation>
      <Annotation Term="Core.LongDescription">
        <String>
## Open Issues


### Tagging of contact-related fields as "personal data"

- Is it really necessary to tag contact-related fields as "personal data"? Can a firstname, lastname, or birthdate ever be "non-personal data"?


### Address-related fields        

Field | Question
------|---------
address-district | Not part of vCard: why is this needed? Usually the district isn't part of an address
address-care-of-name | c/o: not part of vCard: why needed?
address-building | Not part of vCard: why is this needed?
        </String>
      </Annotation>

      <Term Name="Semantics" Type="PersonalData.SemanticsType" AppliesTo="EntitySet">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of the data contained in the annotated entity set" />
      </Term>
      <TypeDefinition Name="SemanticsType" UnderlyingType="Edm.String">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of data set" />
        <Annotation Term="Validation.AllowedValues">
          <Collection>
            <Record>
              <PropertyValue Property="Value" String="DataSubject" />
              <Annotation Term="Core.Description"
                String="The entities of this set identify/describe a 'data subject' (an identified or identifiable natural person), e.g. CustomerMasterHeader, VendorMasterHeader" />
              <Annotation Term="Core.LongDescription">
                <String>These entities are relevant for audit logging. There are no restrictions on their structure. The properties should be annotated suitably with [FieldSemantics](#FieldSemantics)</String>
              </Annotation>
            </Record>
            <Record>
              <PropertyValue Property="Value" String="PersonRelatedData" />
              <Annotation Term="Core.Description"
                String="The entities of this set are related to a person but do not by themselves identify/describe a person" />
              <Annotation Term="Core.LongDescription" String="These entities are relevant for audit logging." />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="SearchProvider" />
              <Annotation Term="Core.Description"
                String="Combined/Joined view of the Data Subject Identity which contains the entire personal information of the Data Subject including multiple addresses, emails, phone, facsimile, etc." />
              <Annotation Term="Core.LongDescription"
                String="*TODO: this seems rather special: isn't this just another `DataSubject`?*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="LegalGround" />
              <Annotation Term="Core.Description"
                String="Provides information regarding the legal ground (consent/contract/purpose) maintained for the application." />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="ReadAccessLog" />
              <Annotation Term="Core.Description"
                String="Provides a view of the read access logs that are logged by the application. It provides the information about how all have read the sensitive data." />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="ChangeLog/AuditLog" />
              <Annotation Term="Core.Description"
                String="Provides a view of the change logs that are logged by the application. It provides the information about changes to the personal data done in the application." />
              <Annotation Term="Core.LongDescription"
                String="*TODO: what is the aligned/correct name: change log or audit log?*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="AuthorizationReport" />
              <Annotation Term="Core.Description"
                String="Provides a report about which users/roles have permissions to view the personal data of a Data Subject." />
            </Record>
          </Collection>
        </Annotation>
      </TypeDefinition>

      <Term Name="FieldSemantics" Type="PersonalData.FieldSemanticsType" AppliesTo="Property">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of the data contained in the annotated property" />
      </Term>
      <TypeDefinition Name="FieldSemanticsType" UnderlyingType="Edm.String">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of a data field" />
        <Annotation Term="Validation.AllowedValues">
          <Collection>
            <Record>
              <PropertyValue Property="Value" String="DataSubjectId" />
              <Annotation Term="Core.Description" String="ID of the data subject" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="DataSubjectType???" />
              <Annotation Term="Core.Description" String="Type of the data subject" />
              <Annotation Term="Core.LongDescription" String="*TODO: crisp definition needed*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="DataSubjectRole???" />
              <Annotation Term="Core.Description" String="Role of the data subject" />
              <Annotation Term="Core.LongDescription" String="*TODO: crisp definition needed*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="~~DataSubjectTechId~~" />
              <Annotation Term="Core.Description"
                String="Obsolete: a generic concept for pairs of internal and external ID (e.g. UUID plus 'rememberable' ID) - Common.ExternalID - is in the works, no need for a special case here" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="LegalGroundType" />
              <Annotation Term="Core.Description"
                String="The annotated field holds the type of Legal Ground on which the Business Data is holding reference to Data Subject Data." />
              <Annotation Term="Core.LongDescription">
                <String>Examples:

                - Consent

                - Name of Business Process
                </String>
              </Annotation>
            </Record>
            <Record>
              <PropertyValue Property="Value" String="LegalGroundId" />
              <Annotation Term="Core.Description"
                String="The annotated field holds the actual ID of the Legal Ground on which the Business Data is holding reference to Data Subject Data." />
              <Annotation Term="Core.LongDescription">
                <String>Examples:

                - Consent ID

                - Sales Contract ID

                - Purchase Contract ID

                - Service Contract ID
                </String>
              </Annotation>
            </Record>
            <Record>
              <PropertyValue Property="Value" String="~~UserProfileId~~" />
              <Annotation Term="Core.Description"
                String="*TODO: description is missing - what is a user profile id, and is it tied to some specific identity provider or authorization management tool? Who is going to need this, and why?*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="PersonalData" />
              <Annotation Term="Core.Description" String="Personal Identifiable Information" />
              <Annotation Term="Core.LongDescription"
                String="Changes are tracked in the change log.&#xA;&#xA;*TODO: Is this annotation really necessary on fields that are already marked as being contact data or address data?*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="RelatedData" />
              <Annotation Term="Core.Description" String="Related Entity Information" />
              <Annotation Term="Core.LongDescription"
                String="Changes are _not_ tracked in the change log.&#xA;&#xA;*TODO: discuss with Girish*" />
            </Record>
          </Collection>
        </Annotation>
      </TypeDefinition>

      <Term Name="IsSensitive" Type="Core.Tag" DefaultValue="true" AppliesTo="Property">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Property contains sensitive personal data" />
        <Annotation Term="Core.LongDescription" String="*TODO: crisp definition of 'sensitive' needed*" />
      </Term>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>