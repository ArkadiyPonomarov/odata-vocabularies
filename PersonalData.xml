<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Alias="Core" Namespace="Org.OData.Core.V1" />
  </edmx:Reference>
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml">
    <edmx:Include Alias="Validation" Namespace="Org.OData.Validation.V1" />
  </edmx:Reference>

  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="com.sap.vocabularies.PersonalData.v1" Alias="PersonalData">
      <Annotation Term="Common.Experimental" />
      <Annotation Term="Core.Description">
        <String>Terms for annotating Personal Data</String>
      </Annotation>
      <Annotation Term="Core.Description" Qualifier="Published">
        <String>2018-01-24 Â© Copyright 2018 SAP SE. All rights reserved</String>
      </Annotation>
      <Annotation Term="Core.Links">
        <Collection>
          <Record>
            <PropertyValue Property="rel" String="latest-version" />
            <!-- TODO: replace with SCN link once published -->
            <PropertyValue Property="href" String="https://github.wdf.sap.corp/pages/odata/vocabularies/PersonalData.xml" />
          </Record>
          <Record>
            <PropertyValue Property="rel" String="describedby" />
            <!-- TODO: replace with SCN link once published -->
            <PropertyValue Property="href" String="https://github.wdf.sap.corp/odata/vocabularies/blob/master/PersonalData.md" />
          </Record>
        </Collection>
      </Annotation>
      <Annotation Term="Core.LongDescription">
        <String>
## Open Issues

### Address-related fields        

Field | Question
------|---------
address-district | Not part of vCard: why is this needed? Usually the district isn't part of an address
address-care-of-name | c/o: not part of vCard: why needed?
address-building | Not part of vCard: why is this needed?

### Tagging of fields as "personal data"

- Is it really necessary to tag contact-related fields as "personal data"? Can a firstname, lastname, or birthdate ever be "non-personal data"?
        </String>
      </Annotation>

      <Term Name="IsSensitive" Type="Core.Tag" DefaultValue="true" AppliesTo="Property">
        <Annotation Term="Core.Description" String="Property contains sensitive personal data" />
      </Term>

      <Term Name="Semantics" Type="PersonalData.SemanticsType" AppliesTo="EntitySet">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of the data contained in the annotated entity set" />
      </Term>
      <TypeDefinition Name="SemanticsType" UnderlyingType="Edm.String">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of data set" />
        <Annotation Term="Validation.AllowedValues">
          <Collection>
            <Record>
              <PropertyValue Property="Value" String="DataSubjectIdentity" />
              <Annotation Term="Core.Description"
                String="Data Subject Identity, e.g. CustomerMasterHeader, VendorMasterHeader (The entity that identifies/contain Personal Data about the data subject)." />
              <Annotation Term="Core.LongDescription">
                <String>The structure of this entity set can be as per the business requirement.  The fields of the entity set should be annotated suitably so that we can relate the content with Data Privacy (Fields are defined further in the document)

*TODO: How does this differ from the similarly named DataSubjectId in [FieldSemanticsType](#FieldSemanticsType)? Should this rather just be a DataSubject or a DataSubjectType? Would fit to CustomerMasterHeader -> Data Subject, CustomerID -> DataSubjectId*
                </String>
              </Annotation>
            </Record>
            <Record>
              <PropertyValue Property="Value" String="SearchProvider" />
              <Annotation Term="Core.Description"
                String="Combined/Joined view of the Data Subject Identity which contains the entire personal information of the Data Subject including multiple addresses, emails, phone, facsimile, etc." />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="LegalGround" />
              <Annotation Term="Core.Description"
                String="Provides information regarding the legal ground (consent/contract/purpose) maintained for the application." />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="ReadAccessLog" />
              <Annotation Term="Core.Description"
                String="Provides a view of the read access logs that are logged by the application. It provides the information about how all have read the sensitive data." />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="ChangeLog" />
              <Annotation Term="Core.Description"
                String="Provides a view of the change logs that are logged by the application. It provides the information about changes to the personal data done in the application." />
              <Annotation Term="Core.LongDescription"
                String="*TODO: Align with Steffen Weinstock and Wolfgang Koch how the counterpart annotation for 'please keep a change log for this view' will be named*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="AuthorizationReport" />
              <Annotation Term="Core.Description"
                String="Provides a report about which users/roles have permissions to view the personal data of a Data Subject." />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="PersonRelatedData" />
              <Annotation Term="Core.Description" String="The entities of this set are related to a person" />
            </Record>
          </Collection>
        </Annotation>
      </TypeDefinition>

      <Term Name="FieldSemantics" Type="PersonalData.FieldSemanticsType" AppliesTo="Property">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of the data contained in the annotated property" />
      </Term>
      <TypeDefinition Name="FieldSemanticsType" UnderlyingType="Edm.String">
        <Annotation Term="Common.Experimental" />
        <Annotation Term="Core.Description" String="Primary purpose/meaning of a data field" />
        <Annotation Term="Validation.AllowedValues">
          <Collection>
            <Record>
              <PropertyValue Property="Value" String="DataSubjectId" />
              <Annotation Term="Core.Description" String="Human-readable id of the data subject" />
              <Annotation Term="Core.LongDescription"
                String="*TODO: How does this differ from the similarly named DataSubjectIdentity in [SemanticsType](#SemanticsType)?*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="DataSubjectTechId" />
              <Annotation Term="Core.Description" String="Generated id or UUID of the data subject which could be specific to the application" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="LegalGroundType" />
              <Annotation Term="Core.Description"
                String="The annotated field holds the type of Legal Ground on which the Business Data is holding reference to Data Subject Data." />
              <Annotation Term="Core.LongDescription">
                <String>Field values can be

                - Consent

                - Name of Business Process
                </String>
              </Annotation>
            </Record>
            <Record>
              <PropertyValue Property="Value" String="LegalGroundId" />
              <Annotation Term="Core.Description"
                String="The annotated field holds the actual ID of the Legal Ground on which the Business Data is holding reference to Data Subject Data." />
              <Annotation Term="Core.LongDescription">
                <String>Field values can be

                - Consent ID

                - Sales Contract ID

                - Purchase Contract ID

                - Service Contract ID
                </String>
              </Annotation>
            </Record>
            <Record>
              <PropertyValue Property="Value" String="UserProfileId" />
              <Annotation Term="Core.Description"
                String="*TODO: description is missing - what is a user profile id, and is it tied to some specific identity provider or authorization management tool?*" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="PersonRelatedData" />
              <Annotation Term="Core.Description" String="Personal Identifiable Information (Personal Data)" />
              <Annotation Term="Core.LongDescription"
                String="*TODO: Is this annotation really necessary on fields that are already marked as being contact data or address data?*" />
            </Record>
          </Collection>
        </Annotation>
      </TypeDefinition>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>